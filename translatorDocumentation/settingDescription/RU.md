
# Описание настроек и настроечного файла.


___

<!-- Типы данных. -->
[^text]: Текстовый тип данных. Ожидается ввод значения, экранированного кавычками.
[^bool]: Булевый тип данных.&#160;<span class="notranslate">true/false</span>.
[^positive]: Положительный числовой тип данных. Ожидается ввод числа из множества положительных вещественных чисел.

[^GUI]: <span class="notranslate">Graphical User Interface.</span>&#160;Графический интерфейс. Окно настройки, появляющееся в игре.
[^inSettingMenu]: Название параметра в графическом интерфейсе.

## Общий вид настроечного файла:

```json
{
    "gameLanguage": "en",
    "directionOfTranslation": "ru",
    "prescanOnStartup": false,
    "realtimeTranslationOnStartup": false,
    "_debug_mode": false,
    "translationService": "google_client5",
    "workMethod": "dialogueOnly",
    "originalInHistory": false,
    "requestsFrequency": null,
    "splitTextAsSentences": false,
    "googleHost": "translate.google.com",
    "seleniumStartMode": "hide",
    "seleniumInputSplitMethod": "strings",
    "extraTextOptions": {
        "font": null,
        "size": null,
        "italic": false,
        "bold": false
    }
}
```


___


* Формат описания следующий:
    * Сначала идёт название параметра в настроечном файле.
        * На этой же строке указывается номер-сноска типа допустимых данных.
            * Текстовый тип данных: [^text]
                * Ожидается ввод значения, экранированного кавычками.
            * Булевый тип данных: [^bool]
                *  <span class="notranslate">___true___ / ___false___</span>
            * Положительный числовой тип данных: [^positive]
                * Ожидается ввод числа из множества положительных вещественных чисел.
    * На следующей строке указывается название соответствующего пункта в GUI[^GUI].
        * Только если он имеется. т.к. присутствуют параметры, недоступные в GUI[^GUI].
    * Далее следует объяснение специфики пункта.


___


* В тексте могут встречаться следующие термины: ___прескан___, ___рилтайм перевод___, etc. Информацию о них можно найти в соответсвующих разделах [FAQ](../FAQ/RU.md).


* Если в документации имеются пункты настройки, которых пока нет в переводчике, их следует игнорировать, т.к. документация пишется одновременно с обновлением переводчика и, на данный момент, эти пункты ещё в бета-тесте.


___


* ### Дисклеймер:

    1. Информация, представленная в этой документации, исключительно ознакомительного характера.
    1. Все необходимые настройки лучше проводить в GUI[^GUI].
    1. Крайне не рекомендуется менять что либо в настроечном файле, без полного понимания своих действий.
    1. Создатель переводчика не несёт никакой ответственности за некорректную работу, при ручном изменении настроечного файла.

___

## Описание параметров.


1. ###  <span class="notranslate">___gameLanguage___</span>: [^text]
    * __"Исходный язык игры."__ [^inSettingMenu]

    * Язык игры с которой нужен перевод.
        * Код языка от конкретного сервиса, либо название языка на английском.
            * Примеры допустимых параметров:
                *  <span class="notranslate">"en"</span>
                *  <span class="notranslate">"en-GB"</span>
                *  <span class="notranslate">"Portuguese"</span>
                *  <span class="notranslate">"Polish"</span>
                *  <span class="notranslate">"Chinese"</span>


1. ### <span class="notranslate">___directionOfTranslation___</span>: [^text]
    * __"Направление перевода."__ [^inSettingMenu]

    * Язык игры на которую нужен перевод.
        * Формат указываемых данных идентичен параметру&#160;<span class="notranslate">___gameLanguage___</span>.


1. ### <span class="notranslate">___prescanOnStartup___</span>: [^bool]
    * __"Предварительное сканирование при запуске игры."__ [^inSettingMenu]

    * При активированном параметре запускает прескан в момент запуска игры.
    * Не рекомендуется к использованию, за исключением особых ситуаций, т.к. сильно отнимает время, если в игре присутствуют начальные заставки и т.п.


1. ### <span class="notranslate">___realtimeTranslationOnStartup___</span>: [^bool]
    * __"Перевод в реальном времени при запуске игры."__ [^inSettingMenu]

    * При активированном параметре запускает перевод в реальном времени при запуске игры.
    * Так же, как и в предыдущем пункте, не рекомендуется к использованию, за исключением особых ситуаций, по тем же причинам.


1. ### <span class="notranslate">___\_debug_mode___</span>: [^bool]
    * __"Режим отладки."__ [^inSettingMenu]

    * Режим отладки.
    * При активированном параметре работа переводчика меняется следующим образом:
        * При возникновении ошибки, будет брошен трейсбек.
        * Будет активировано логирование действий переводчика.
    * За исключением особых случаев, в активации этого параметра нет необходимости.


1. ### <span class="notranslate">___translationService___</span>: [^text]
    * __"Сервис перевода."__ [^inSettingMenu]

    * Сервис который будет осуществлять перевод.
    * Доступны следующие значения:

        * <span class="notranslate">__*"google_gtx"*__</span>:
            * __Небраузерная логика.__
            * Сервис с самым лучшим (из небраузерных) качеством перевода.
            * т.к. Google банит при подозрении на автоматизацию, скорость запросов принудительно снижена до 8 запросов в минуту.

        * <span class="notranslate">__*"google_client5"*__</span>:
            * __Небраузерная логика.__
            * Сервис с посредственным (по крайней мере в&#160;<span class="notranslate">___"ru"___</span>&#160;направлении) качеством перевода, но хорошей скоростью.

        * <span class="notranslate">__*"google_rpc"*__</span>:
            * __Небраузерная логика.__
            * Полностью идентичен&#160;<span class="notranslate">___"google_client5"___</span>, но с возможностью менять хост сервиса (параметр&#160;<span class="notranslate">___"googleHost"___</span>).

        * <span class="notranslate">__*"selenium_deepl"*__</span>:
            * __Браузерная логика.__
            * Сервис с лучшим, из всех имеющихся, качеством перевода.
            * Присутствуют минусы, характерные для переводчиков с браузерной логикой.
                * Подробнее можно ознакомиться в соответствующем разделе в [FAQ](../FAQ/RU.md#о-браузерной-логике).


1. ### <span class="notranslate">___workMethod___</span>: [^text]
    * __"Способ работы переводчика."__ [^inSettingMenu]

    * Способ работы переводчика.
    * Доступны следующие значения:

        * <span class="notranslate">___"dialogueOnly"___</span>:
            * __"Перевод диалогов и меню."__ [^inSettingMenu]
            * Переводчик будет использовать для работы параметр&#160;[<span class="notranslate">__config.say_menu_text_filter__</span>](https://www.renpy.org/doc/html/config.html#var-config.say_menu_text_filter).
            * Будут переведён основной текст (в диалоговом окне) и меню выбора.
            * В большинстве случаев рекомендуется использовать именно этот параметр.

        * <span class="notranslate">___"allText"___</span>:
            * __"Перевод всего текста в игре (Бета)."__ [^inSettingMenu]
            * Переводчик будет использовать для работы перезапись метода&#160;[<span class="notranslate">__Text.set_text__</span>](https://github.com/renpy/renpy/blob/df628ea0f54c434d790a7e7527a47efc16092e41/renpy/text/text.py#L1672).
            * Будет переведён весь выводимый на экран текст.
            * Режим находится в бета стадии и не рекомендуется к использованию без крайней необходимости.
            * Так как при активации параметра будет переведён весь текст на экране, возможно длительное "зависание" игры.
            * Абсолютно противопоказано к использованию, если игра демонстрирует динамические данные.
                * Такие как:
                    * _Время._
                    * _Изменяющиеся статы персонажа._
                    * _etc._
                * Потому как переводчик будет пытаться перевести каждое из новых значений, что приведёт к полному зависанию процесса.


1. ### <span class="notranslate">___originalInHistory___</span>: [^bool]
    * __"Сохранять оригинал в истории."__ [^inSettingMenu]

    * При активированном параметре на [экран "истории"](https://www.renpy.org/doc/html/history.html#dialogue-history) будет выводиться оригинальный текст, вместо перевода.


1. ### <span class="notranslate">___requestsFrequency___</span>: [^positive]
    * __"Частота запросов."__ [^inSettingMenu]

    * Частота обращений к сервису перевода.
        * Количество запросов в минуту.
    * Для некоторых сервисов перевода значение фиксировано.
    * Для браузерной логики игнорируется.


1. ### <span class="notranslate">___splitTextAsSentences___</span>: [^bool]
    * __"Разделять предложения при переводе."__ [^inSettingMenu]

    * При активированном параметре, перед переводом текст будет разделён на "предложения" по [паттерну](https://docs.python.org/2.7/library/re.html):
        ```python
        # Python RE logic.
        r"(?P<text>[^!?….\r\n]+)(?P<end_mark>[!?….]*)"
        ```
    * Некоторые сервисы перевода (например&#160;<span class="notranslate">__*google_client5*__</span>) возвращают некорректный перевод, если в тексте присутствуют излишние знаки препинания. Данная настройка позволяет избежать подобного.
    * В некоторых сервисах этот параметр активирован по умолчанию и настройка игнорируется (например ранее обозначенный&#160;<span class="notranslate">__*google_client5*__</span>).
    * Активировать данный параметр не рекомендуется.
        * В тех сервисах где он нужен, он активирован по умолчанию.


1. ### <span class="notranslate">___googleHost___</span>: [^text]

    * Хост для сервиса перевода&#160;<span class="notranslate">__*google_rpc*__</span>.
        * __При выборе иных сервисов параметр игнорируется.__
    * Для стран, где стандартный&#160;<span class="notranslate">___translate.google.com___</span>&#160;работает некорректно (или медленно).
    * Например:
        * Для Латвии:
            * <span class="notranslate">___"translate.google.lv"___</span>
        * Для Китая:
            * <span class="notranslate">___"translate.google.cn"___</span>
        * И так далее...


1. ### <span class="notranslate">___seleniumStartMode___</span>: [^text]

    * Режим запуска браузера для работы браузерной логики.
        * Подробнее о браузерной логике в соответствующем разделе в [FAQ](../FAQ/RU.md#о-браузерной-логике).

    * Доступны следующие значения:
        * <span class="notranslate">___"hide"___</span>:
            * Браузер будет запущен как фоновый процесс и не будет мешаться на панели задач.
        * <span class="notranslate">___"default"___</span>:
            * Браузер запустится в обычном режиме.
                * При перезапусках браузер так же вернётся в обычный режим, даже если пользователь свернёт окно.
        * <span class="notranslate">___"minimized"___</span>:
            * Идентично параметру&#160;<span class="notranslate">___"default"___</span>, но, после запуска, браузер свернётся.

    * Важно:
        * т.к. браузерная логика автоматизирована, вмешательство пользователя (как в примере ниже) может помешать корректной работе:
            * Нажатие кнопок на странице перевода.
            * Открытие вкладок.
            * Закрытие окна перевода.
            * etc.
        * В случае подобного вмешательства жалобы на некорректную работу не принимаются.


1. ### <span class="notranslate">___seleniumInputSplitMethod___</span>: [^text]

    * Режим разделения вводимого текста, для сервисов с [браузерной логикой](../FAQ/RU.md#о-браузерной-логике).

    * Доступны следующие значения:

        * <span class="notranslate">___"all"___</span>:
            * Весь текст будет введён сразу.
            * Возможно подвисание, если текст вел**и**к.
            * Возможно обнаружение браузером автоматизации.

        * <span class="notranslate">___"strings"___</span>:
            * Текст будет введён по строкам.

        * <span class="notranslate">___"symbols"___</span>:
            * Текст будет введён посимвольно, без паузы между вводом.

        * <span class="notranslate">___"humanTyping"___</span>:
            * Имитация ввода человеком со средней скоростью печати - 450 символов в минуту (реальное значение рандомизируется).


1. ### <span class="notranslate">___extraTextOptions___</span>:
    * __"Настройки отображаемого текста."__ [^inSettingMenu]

    1. ### <span class="notranslate">___font___</span>: [^text]
        * __"Шрифт."__ [^inSettingMenu]
        * Шрифт с которым будет выводиться текст.
        * Путь к файлу шрифта задаётся относительно папке&#160;<span class="notranslate">___"%NovelDir%\\game"___</span>, где&#160;<span class="notranslate">__%NovelDir%__</span>&#160;- папка с игрой.
            * К примеру, шрифт лежит в папке:
                * <span class="notranslate">_"C:\\Games\\MyNovel\\game\\fonts\\Comic Sans.otf"_</span>
            * Значит в файле следует прописать:
                * <span class="notranslate">_"fonts/Comic Sans.otf"_</span>
                    * Все обратные слеши (<span class="notranslate">___\\___</span>), если они имеются в пути, следует заменить на прямые (<span class="notranslate">___/___</span>).
        * Выбрав шрифт один раз - операцию не обязательно повторять для каждой игры.
            * Все используемые шрифты кешируются.
                * При указании в другой игре шрифта, который уже был выбран ранее, файл добавится автоматически.
                * Так же шрифт можно выбрать в GUI[^GUI] в пункте ___"Выбрать из использовавшихся ранее"___.

    1. ### <span class="notranslate">___size___</span>: [^text]
        * __"Размер."__ [^inSettingMenu]
        * Размер выводимого текста.
        * Принимается положительное целое число, либо [выражение в формате Ren'Py](https://www.renpy.org/doc/html/text.html#text-tag-size).

    1. ### <span class="notranslate">___italic___</span>: [^bool]
        * __"Курсивный текст."__ [^inSettingMenu]
        * При активированном параметре делает выводимый текст курсивным.

    1. ### <span class="notranslate">___bold___</span>: [^bool]
        * __"Жирный текст."__ [^inSettingMenu]
        * При активированном параметре делает выводимый текст жирным.
