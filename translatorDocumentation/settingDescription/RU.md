
# Описание настроек и настроечного файла.

___

<!-- Типы данных. -->
[^text]: Текстовый тип данных. Ожидается ввод значения, экранированного кавычками.
[^bool]: Булевый тип данных. true/false.
[^positive]: Положительный числовой тип данных. Ожидается ввод числа из множества положительных вещественных чисел.

[^GUI]: Graphical User Interface. Графический интерфейс. Окно настройки, появляющееся в игре.
[^inSettingMenu]: Название параметра в графическом интерфейсе.

## Общий вид настроечного файла:

```json
{
    "gameLanguage": "en",
    "directionOfTranslation": "ru",
    "modeOnStartup": "off",
    "_debug_mode": false,
    "translationService": "selenium_deepl",
    "workMethod": "dialogueOnly",
    "originalInHistory": false,
    "requestsFrequency": null,
    "splitTextAsSentences": false,
    "googleHost": "translate.google.com",
    "seleniumStartMode": "hide",
    "seleniumInputSplitMethod": "strings",
    "extraTextOptions": {
        "font": null,
        "size": null,
        "italic": false,
        "bold": false
    }
}
```

___

* Формат описания следующий:
    * Сначала идёт название параметра в настроечном файле.
        * На этой же строке указывается номер-сноска типа допустимых данных.
            * Текстовый тип данных: [^text]
                * Ожидается ввод значения, экранированного кавычками.
            * Булевый тип данных: [^bool]
                *  ___true___ / ___false___
            * Положительный числовой тип данных: [^positive]
                * Ожидается ввод числа из множества положительных вещественных чисел.
    * На следующей строке указывается название соответствующего пункта в GUI[^GUI].
        * Только если он имеется. т.к. присутствуют параметры, недоступные в GUI[^GUI].
    * Далее следует объяснение специфики пункта.

___

* В тексте могут встречаться следующие термины: ___прескан___, ___рилтайм перевод___, etc. Информацию о них можно найти в соответсвующих разделах [FAQ](../FAQ/RU.md).

* Если в документации имеются пункты настройки, которых пока нет в переводчике, их следует игнорировать, т.к. документация пишется одновременно с обновлением переводчика и, на данный момент, эти пункты ещё в бета-тесте.

___

* ### Дисклеймер:

    1. Информация, представленная в этой документации, исключительно ознакомительного характера.
    1. Все необходимые настройки лучше проводить в GUI[^GUI].
    1. Крайне не рекомендуется менять что либо в настроечном файле, без полного понимания своих действий.
    1. Создатель переводчика не несёт никакой ответственности за некорректную работу, при ручном изменении настроечного файла.

___

## Описание параметров.

1. ###  ___gameLanguage___: [^text]
    * __"Исходный язык игры."__ [^inSettingMenu]

    * Язык самой игры (с которого нужен перевод).
        * Код языка от конкретного сервиса, либо название языка на английском.
            * Примеры допустимых параметров:
                *  "en"
                *  "en-GB"
                *  "Portuguese"
                *  "Polish"
                *  "Chinese"


1. ### ___directionOfTranslation___: [^text]

    * __"Направление перевода."__ [^inSettingMenu]

    * Язык на который нужно перевести игру.
        * Формат указываемых данных идентичен параметру ___gameLanguage___.

1. ### ___modeOnStartup___: [^text]

    * Режим работы переводчика при старте игры.

    * Принимаются 4 параметра:

        *  __*"off"*__:
            * При старте ничего не происходит. Нужный режим запускается вручную.
            * Рекомендуемый вариант использования.

        *  __*"db_only"*__:
            * При старте активируется режим перевода только из базы данных.
            * [Читать о режиме подробнее.](../FAQ/RU.md#перевод-только-из-базы-данных)

        *  __*"realtime"*__:
            * При старте активируется режим перевода в реальном времени.
            * [Читать о режиме подробнее.](../FAQ/RU.md#перевод-в-реальном-времени)

        *  __*"prescan"*__:
            * При старте активируется предварительное сканирование.
            * [Читать о режиме подробнее.](../FAQ/RU.md#предварительное-сканирование-тн-прескан)

1. ### ___\_debug_mode___: [^bool]

    * __"Режим отладки."__ [^inSettingMenu]

    * Режим отладки.
    * При активированном параметре работа переводчика меняется следующим образом:
        * При возникновении ошибки, будет брошен трейсбек.
        * Будет активировано логирование действий переводчика.
    * За исключением особых случаев, в активации этого параметра нет необходимости.


1. ### ___translationService___: [^text]

    * __"Сервис перевода."__ [^inSettingMenu]

    * Сервис который будет осуществлять перевод.
    * Доступны следующие значения:

        * __*"google_gtx"*__:

            * __Небраузерная логика.__
            * Сервис с самым лучшим (из небраузерных) качеством перевода.
            * т.к. Google банит при подозрении на автоматизацию, скорость запросов принудительно снижена до 8 запросов в минуту.

        * __*"google_client5"*__:

            * __Небраузерная логика.__
            * Сервис с посредственным (по крайней мере в ___"ru"___ направлении) качеством перевода, но хорошей скоростью.

        * __*"google_rpc"*__:

            * __Небраузерная логика.__
            * Полностью идентичен ___"google_client5"___, но с возможностью менять хост сервиса (параметр ___"googleHost"___).

        * __*"selenium_deepl"*__:

            * __Браузерная логика.__
            * Сервис с лучшим, из всех имеющихся, качеством перевода.
            * Присутствуют минусы, характерные для переводчиков с браузерной логикой.
                * Подробнее можно ознакомиться в соответствующем разделе в [FAQ](../FAQ/RU.md#о-браузерной-логике).


1. ### ___workMethod___: [^text]

    * __"Способ работы переводчика."__ [^inSettingMenu]

    * Способ работы переводчика.
    * Доступны следующие значения:

        * ___"dialogueOnly"___:
            * __"Перевод диалогов и меню."__ [^inSettingMenu]
            * Переводчик будет использовать для работы параметр [__config.say_menu_text_filter__](https://www.renpy.org/doc/html/config.html#var-config.say_menu_text_filter).
            * Будут переведён основной текст (в диалоговом окне) и меню выбора.
            * В большинстве случаев рекомендуется использовать именно этот параметр.

        * ___"allText"___:
            * __"Перевод всего текста в игре (Бета)."__ [^inSettingMenu]
            * Переводчик будет использовать для работы перезапись метода [__Text.set_text__](https://github.com/renpy/renpy/blob/df628ea0f54c434d790a7e7527a47efc16092e41/renpy/text/text.py#L1672).
            * Будет переведён весь выводимый на экран текст.
            * Режим находится в бета стадии и не рекомендуется к использованию без крайней необходимости.
            * Так как при активации параметра будет переведён весь текст на экране, возможно длительное "зависание" игры.
            * Абсолютно противопоказано к использованию, если игра демонстрирует динамические данные.
                * Такие как:
                    * _Время._
                    * _Изменяющиеся статы персонажа._
                    * _etc._
                * Потому как переводчик будет пытаться перевести каждое из новых значений, что приведёт к полному зависанию процесса.


1. ### ___originalInHistory___: [^bool]

    * __"Сохранять оригинал в истории."__ [^inSettingMenu]

    * При активированном параметре на [экран "истории"](https://www.renpy.org/doc/html/history.html#dialogue-history) будет выводиться оригинальный текст, вместо перевода.


1. ### ___requestsFrequency___: [^positive]

    * __"Частота запросов."__ [^inSettingMenu]

    * Частота обращений к сервису перевода.
        * Количество запросов в минуту.
    * Для некоторых сервисов перевода значение фиксировано.
    * Для браузерной логики игнорируется.


1. ### ___splitTextAsSentences___: [^bool]

    * __"Разделять предложения при переводе."__ [^inSettingMenu]

    * При активированном параметре, перед переводом текст будет разделён на "предложения" по [паттерну](https://docs.python.org/2.7/library/re.html):

        ```python
        # Python RE logic.
        r"(?P<text>[^!?….\r\n]+)(?P<end_mark>[!?….]*)"
        ```

    * Некоторые сервисы перевода (например __*google_client5*__) возвращают некорректный перевод, если в тексте присутствуют излишние знаки препинания. Данная настройка позволяет избежать подобного.
    * В некоторых сервисах этот параметр активирован по умолчанию и настройка игнорируется (например ранее обозначенный __*google_client5*__).
    * Активировать данный параметр не рекомендуется.
        * В тех сервисах где он нужен, он активирован по умолчанию.


1. ### ___googleHost___: [^text]

    * Хост для сервиса перевода __*google_rpc*__.
        * __При выборе иных сервисов параметр игнорируется.__
    * Для стран, где стандартный ___translate.google.com___ работает некорректно (или медленно).
    * Например:
        * Для Латвии:
            * ___"translate.google.lv"___
        * Для Китая:
            * ___"translate.google.cn"___
        * И так далее...


1. ### ___seleniumStartMode___: [^text]

    * Режим запуска браузера для работы браузерной логики.
        * Подробнее о браузерной логике в соответствующем разделе в [FAQ](../FAQ/RU.md#о-браузерной-логике).

    * Доступны следующие значения:
        * ___"hide"___:
            * Браузер будет запущен как фоновый процесс и не будет мешаться на панели задач.
        * ___"default"___:
            * Браузер запустится в обычном режиме.
                * При перезапусках браузер так же вернётся в обычный режим, даже если пользователь свернёт окно.
        * ___"minimized"___:
            * Идентично параметру ___"default"___, но, после запуска, браузер свернётся.

    * Важно:
        * т.к. браузерная логика автоматизирована, вмешательство пользователя (как в примере ниже) может помешать корректной работе:
            * Нажатие кнопок на странице перевода.
            * Открытие вкладок.
            * Закрытие окна перевода.
            * etc.
        * В случае подобного вмешательства жалобы на некорректную работу не принимаются.

1. ### ___seleniumInputSplitMethod___: [^text]

    * Режим разделения вводимого текста, для сервисов с [браузерной логикой](../FAQ/RU.md#о-браузерной-логике).

    * Доступны следующие значения:

        * ___"all"___:
            * Весь текст будет введён сразу.
            * Возможно подвисание, если текст вел**и**к.
            * Возможно обнаружение браузером автоматизации.

        * ___"strings"___:
            * Текст будет введён по строкам.

        * ___"symbols"___:
            * Текст будет введён посимвольно, без паузы между вводом.

        * ___"humanTyping"___:
            * Имитация ввода человеком со средней скоростью печати - 450 символов в минуту (реальное значение рандомизируется).


1. ### ___extraTextOptions___:

    * __"Настройки отображаемого текста."__ [^inSettingMenu]

    1. ### ___font___: [^text]

        * __"Шрифт."__ [^inSettingMenu]
        * Шрифт с которым будет выводиться текст.
        * Путь к файлу шрифта задаётся относительно папке ___"%NovelDir%\\game"___, где __%NovelDir%__ - папка с игрой.
            * К примеру, шрифт лежит в папке:
                * _"C:\\Games\\MyNovel\\game\\fonts\\Comic Sans.otf"_
            * Значит в файле следует прописать:
                * _"fonts/Comic Sans.otf"_
                    * Все обратные слеши (___\\___), если они имеются в пути, следует заменить на прямые (___/___).
        * Выбрав шрифт один раз - операцию не обязательно повторять для каждой игры.
            * Все используемые шрифты кешируются.
                * При указании в другой игре шрифта, который уже был выбран ранее, файл добавится автоматически.
                * Так же шрифт можно выбрать в GUI[^GUI] в пункте ___"Выбрать из использовавшихся ранее"___.

    1. ### ___size___: [^text]

        * __"Размер."__ [^inSettingMenu]
        * Размер выводимого текста.
        * Принимается положительное целое число, либо [выражение в формате Ren'Py](https://www.renpy.org/doc/html/text.html#text-tag-size).

    1. ### ___italic___: [^bool]

        * __"Курсивный текст."__ [^inSettingMenu]
        * При активированном параметре делает выводимый текст курсивным.

    1. ### ___bold___: [^bool]

        * __"Жирный текст."__ [^inSettingMenu]
        * При активированном параметре делает выводимый текст жирным.
