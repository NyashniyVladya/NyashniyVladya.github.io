
# Ответы на вопросы и общая информация не в формате "вопрос-ответ".

___

## Общая информация.

1. ### Что это за проект такой?

    * **Translator3000** - автоматический переводчик игр (новелл), сделанных на движке Ren'Py, с лёгкой установкой и удобным интерфейсом.

    * Хотите почитать новеллу, а у неё нет перевода на Ваш язык?
        * Всё что Вам нужно - это скопировать файл **Translator3000.rpa** в папку с игрой.
            * Подробнее о установке [здесь](./RU.md#с-чего-начать).

    * Более подробная информация о принципах работы и особенностях переводчика предоставлена в дальнейших разделах документации.

1. ### Ссылки.

    1. #### [Discord сообщество.](https://discord.gg/FqsQXNH6Fg)

        * Тут можно найти ссылку на последнюю актуальную версию, пообщаться с другими пользователями переводчика и поискать ответ на свой вопрос в соответствующем канале.

    1. #### [Boosty.](https://boosty.to/nyashniyvladya)

        * Тут можно поддержать проект и скачать последнюю актуальную версию переводчика.


1. ### О версиях.

    * Существует две версии переводчика:

        1. #### Ознакомительная версия.

            * Скачать можно [здесь](https://github.com/NyashniyVladya/Translator3000).
            * Доступна для загрузки всем без исключения.
            * Версия с ограниченным функционалом, для ознакомления с переводчиком.

        1. #### Основная версия.

            * Подписаться и скачать можно на [Boosty](https://boosty.to/nyashniyvladya?postsTagsIds=124156).

            * Распространяется по принципу [подписной модели](https://ru.wikipedia.org/wiki/Подписка).

            * Версия с полным функционалом, периодическими обновлениями и исправлениями.

            * #### ___Важно___:

                * Только последняя версия является поддерживаемой.
                * Так же, баг репорты принимаются только по последней актуальной версии.
                    * т.к. над переводчиком постоянно ведётся работа, ошибка, возникшая в более ранних версиях, может уже отсутствовать в более поздних.
                    * [Подробней о формате баг репортов](./RU.md#о-багах-и-ошибках).


1. ### С чего начать?

    * Вот Вы подписались на [Boosty](https://boosty.to/nyashniyvladya), скачали ___Translator3000.rpa___ и не знаете что с ним делать. Сейчас объясню.

    1. Копируем файл в папку ___game___ в директории игры, для которой нужен перевод.
    1. Запускаем игру.
    1. В левом верхнем углу появится окно графического интерфейса переводчика.
        * Настраиваем в нём нужные параметры.
        * Так же настройку можно провести через [настроечный файл](./RU.md#noveldir_translator3000_settingjson).
        * Подробнее на [странице описания параметров](../settingDescription/RU.md#описание-параметров).
    1. [Наслаждаемся игрой.](./RU.md#наилучший-оптимальный-для-комфортного-чтения-вариант-использования-следующий)


1. ### О режимах работы.

    * Переводчик может работать в трёх переключаемых режимах:

        1. #### Перевод в реальном времени.

            * Перевод происходит в момент когда игра передаёт строку на вывод.
            * Если строка имеется в базе данных переводов, кешированный перевод выводится сразу.
            * Если строки нет в базе данных переводов (ни разу не выводилась и не было прескана), произойдёт обращение к сервису перевода.
                * При обращении будет неизбежное "подвисание", т.к. выполняется сетевой запрос.

        1. #### Перевод только из базы данных.

            * Похож на предыдущий режим, но с одним важным изменением:
                * Если строки нет в базе данных переводов, она не будет переводиться, а выведется оригинальный текст.

            * Режим очень полезен в новеллах-песочницах, где много постоянно обновляемых данных.
                * При активации режима, c выполненным пресканом, постоянный текст (диалоги и пр.) будет переведён, а динамические данные (дата, время в игре, что либо ещё) будут выведены в неизменном виде.


        1. #### Предварительное сканирование (т.н. прескан).

            * Предварительный перевод всех строк в игре и составление базы данных перевода, для нейтрализации "зависаний" в момент переключения строк.
            * При активации переводчик собирает все строки в игре, группирует и последовательно переводит.
            * Если в игре присутствуют динамические данные (имя игрока и пр.), их лучше ввести __до__ запуска предварительного сканирования.
                * Для корректного перевода строк где используется подстановка динамических значений.
            * Если новелла большая, процесс может занять продолжительное время.

    * #### Наилучший (оптимальный для комфортного чтения) вариант использования следующий:

        1. Запустить новеллу.
        1. Дойти до места где игра запрашивает ввод имени/иных данных (если такое есть).
            * Если ввода данных нет, то просто запустить игру в любом месте.
        1. Ввести нужные данные (если требуется).
        1. Запустить переводчик в режиме предварительного сканирования соответствующим пунктом в графическом интерфейсе.
        1. Дождаться завершения.
            * В зависимости от размера новеллы, прескан может занять длительное время.
            * Если новелла очень большая, имеет смысл оставить игру переводиться и заняться чем либо иным до завершения перевода.
        1. Переключиться на режим перевода ___"только из базы данных"___.
        1. Скрыть графический интерфейс переводчика и наслаждаться новеллой.

1. ### О базе данных.

    * Любой текст, переведённый предварительным сканированием, либо в реальном времени, сохраняется в базу данных на устройстве пользователя.


    * #### Глобальная БД.

        * При первом запуске переводчика, создаётся общая (глобальная) база данных, которая хранит в себе переводы всех новелл, которые когда либо были переведены.

    * #### Локальная БД.

        * Помимо глобальной, для каждой новеллы создаётся своя (локальная) БД.

    * #### Импорт БД.

        * Если кто либо уже прошёл (либо перевёл пресканом) конкретную новеллу, он может поделиться своей БД (локальной, или глобальной).
        * Чтобы использовать перевод от другого человека, достаточно скопировать его базу данных в папку [___imported translations___](./RU.md#noveldirlocal-translationsservicenameimported-translations).
        * После запуска, игра импортирует перевод в локальную БД конкретной игры и глобальную БД.
        * После успешного импорта импортируемый файл удалится.
        * ___Важно:___
            * Как было указано ранее, перевод составляется с подстановкой введённых данных, так что, если составитель базы ввёл иные данные, то строки, содержащие эти данные, потребуется перевести под новый ввод.
        * Готовые БД можно найти в [___Discord сообществе___](https://discord.gg/FqsQXNH6Fg).

    * #### Форматы БД.

        * Несмотря на то, что форматы БД менялись в процессе развития переводчика, импорт старых форматов работает.


    * #### О бэкапах.
        * Если Ваша База Данных по какой либо причине повредилась, переводчик всегда создаёт рядом с файлами БД резервную копию предыдущей версии в формате ___.oldBackup___.
        * Для того чтобы восстановить БД, удалите оригинальный файл БД и переименуйте файл резервной копии, удалив у него окончание ___.oldBackup___.
            * В Вашей системе может быть отключено отображение расширений имён файлов. В этом случае, включите эту возможность, как это делается в Вашей операционной системе.


1. ### О браузерной логике.

    * Некоторые сервисы используют для перевода действия в реальном браузере.
    * #### Для автоматизации используется связка [selenium](https://www.selenium.dev)/[chromedriver](https://chromedriver.chromium.org/home).
    * #### Для корректной работы в ОС должен быть установлен [браузер Google Chrome](https://www.google.com/chrome).

        * Поддерживаются версии новее 70.
            * Лучше, конечно, использовать последнюю.

    * #### Так как данная логика полностью имитирует действия пользователя (открытие страницы, нажатие кнопок, ввод текста), перевод занимает ощутимое время. Рекомендуется использовать __только__ с предварительным сканированием.

    * #### По умолчанию графическая часть браузера отключена.

        * При желании, её можно активировать. Подробнее в [документации настроечного файла](../settingDescription/RU.md#seleniumstartmode-)


1. ### Где что лежит и какие файлы создаёт/использует переводчик.

    * Будут использоваться следующие условные обозначения:

        * ___%UserName%___:
            * Имя текущего пользователя.

        * ___%userprofile%___:
            * Путь до домашней папки пользователя. Может быть разный на разных системах.
                * По умолчанию в Windows:
                    * ___С:\\Users\\%UserName%___
                * По умолчанию в UNIX:
                    * ___/home/%UserName%___
                * По умолчанию в Mac:
                    * ___/Users/%UserName%___

        * ___%ServiceName%___:
            * Название какого либо сервиса перевода.

        * ___%NovelDir%___:
            * Директория игры.
                * Та в которой папки ___game___, ___renpy___ и исполняемый файл запуска.

    * Пути будут писаться в формате Windows (с обратными слешами), при необходимости смените на прямые.

    * Приведён полный список рабочих путей. В зависимости от использования переводчика, некоторых из них может не быть.

    1. #### __*%userprofile%\\vladya's projects database*__:

        * Основная папка для хранения данных.

    1. #### __*%userprofile%\\vladya's projects database\\selenium*__:

        * Основная папка модуля __selenium__, отвечающего за браузерную логику.

    1. #### __*%userprofile%\\vladya's projects database\\selenium\\chromedriver*__:

        * Папка с исполняемыми файлами __cromedriver__, отвечающего за автоматизацию действий в браузере.
        * Содержит папки с номерами версий браузера, которые содержат папки с номерами версий ___chromedriver___, которые содержат исполняемый файл ___chromedriver___.

    1. #### __*%userprofile%\\vladya's projects database\\translator3000*__:

        * Основная папка переводчика.

    1. #### __*%userprofile%\\vladya's projects database\\translator3000\\%ServiceName%*__:

        * Папка с глобальной (для всех новелл) базой данных переводов конкретного сервиса.
        * Содержит папки с номерами версий базы данных, которые содержат файл базы данных ___translations___ (формат может быть различный).

    1. #### __*%userprofile%\\vladya's projects database\\translator3000\\Ren'Py MuitiGame Data.pickle*__:

        * Файл, хранящий данные переноса между играми и использованные шрифты.

    1. #### __*%NovelDir%\\_translator3000_setting.json*__:

        * Файл с настройками переводчика для конкретной новеллы.
        * [Информация по содержанию файла.](../settingDescription/RU.md#описание-настроек-и-настроечного-файла)

    1. #### __*%NovelDir%\\local translations\\%ServiceName%*__:

        * Папка с локальной (для конкретной новеллы) базой данных переводов конкретного сервиса.
        * Содержит папки с номерами версий базы данных, которые содержат файл базы данных ___translations___ (формат может быть различный).
        * Так же содержит папку [___imported translations___](./RU.md#noveldirlocal-translationsservicenameimported-translations) для импорта готовых переводов.

    1. #### __*%NovelDir%\\local translations\\%ServiceName%\\imported translations*__:

        * Папка для импорта готовых переводов.
        * Инструкция по импорту переводов описана [выше](./RU.md#импорт-бд).

    1. #### __*%NovelDir%\\_translator3000Data*__:

        * Папка для рабочих файлов, для конкретной новеллы.

    1. #### __*%NovelDir%\\_translator3000Data\\debug*__:

        * Файлы для отладки работы переводчика.

    1. #### __*%NovelDir%\\_translator3000Data\\debug\\lastLog.log*__:

        * Лог файл, описывающий действия переводчика.
        * Если включён параметр [___\_debug_mode___](../settingDescription/RU.md#_debug_mode-), в файл будет записываться полная информация, в противном случае только базовые данные и информация о ошибках.

    1. #### __*%NovelDir%\\_translator3000Data\\temp*__:

        * Временные файлы переводчика.

    1. #### __*%NovelDir%\\_translator3000Data\\temp\\cacert.pem*__:

        * Файл сертификата для модуля ___requests___.
        * Создаётся только в старых версиях Ren'Py.
            * В версиях Ren'Py, новее 7.4.0, модуль ___requests___ [является частью движка](https://www.renpy.org/doc/html/changelog.html#renpy-7-4).

    1. #### __*%NovelDir%\\game\\Translator3000.rpa*__:

        * Сам переводчик.

    1. #### __*%NovelDir%\\game\\translator3000_ingame_files*__:

        * Папка с файлами переводчика, используемыми в новелле.

    1. #### __*%NovelDir%\\game\\translator3000_ingame_files\\multigame_fonts*__:

        * Папка куда будут копироваться шрифты из других новелл, при их выборе.

    1. #### __*%NovelDir%\\game\\translator3000_ingame_files\\pc_fonts*__:

        * Папка куда будут копироваться шрифты при выборе их в графическом интерфейсе из файлов компьютера.


1. ### О багах и ошибках.

    * Сообщения о ошибках принимаются только по последней актуальной версии.
        * [Подробнее можно ознакомиться здесь.](./RU.md#важно)

    * #### Что делать при возникновении ошибок:

        1. Проверить что у Вас [последняя версия переводчика](./RU.md#важно).

        1. Вопроизвести ситуацию на другой новелле и убедиться, что ошибка повторяется.
            * Если ошибка возникает в единственной новелле, читать [соответствующий пункт FAQ](./RU.md#игра-вставить-имя-игры-не-переводитсяне-запускаетсяработает-некорректно).

        1. Если ошибка возникает во время предварительного сканирования, нажать в графическом интерфейсе "Бросить трейсбек", для составления отчёта о ошибке.

        1. ##### Подготовить следующие данные, необходимые разработчику для отладки:

            1. Лог файл:
                * Как правильно записать лог файл:
                    1. Активируйте [режим отладки](../settingDescription/RU.md#_debug_mode-).
                    1. Дойдите до момента возникновения ошибки.
                * Где будет лежать лог файл?
                    * Читать [предыдущий раздел документации, с описанием путей](./RU.md#noveldir_translator3000datadebuglastloglog).

            1. Информацию о настройках.
                * Режим работы переводчика, сервис и т.д.

            1. Файл ___traceback.txt___ лежащий в директории игры.
                * Если он имеется.

            1. Информацию о том, какие действия привели к ошибке.

            1. Если ошибка возникает с сервисом перевода с [браузерной логикой](./RU.md#о-браузерной-логике), установить параметр ___"default"___ для пункта настройки [___"seleniumStartMode"___](../settingDescription/RU.md#seleniumstartmode-) и добавить в сообщение о ошибке информацию, повлияло ли это на работу.

            1. Любые дополнительные данные, которые сочтёте нужными в контексте данного вопроса.

        1. Ознакомиться с [этим разделом документации](./RU.md#я-не-нашёл-ответа-на-свой-вопрос-в-этой-документации) и, если на Ваш вопрос ещё не отвечали, задать его в канале вопросов.


    * Описание некоторых ошибок:

        * Тип ошибки будет написан в трейсбеке, перед описанием ошибки, либо в конце, после текста перевода.

        1. ##### ___ShadowBan___:

            * Ошибка "теневого" бана. Может возникать у сервисов, которые распознали автоматизацию.
            * Возникает в случае долгого и последовательного перевода крайне больших новелл.

___


## Вопрос - ответ.


1. ### ___У меня "квадратики" вместо текста.___

    * Смените шрифт на другой, поддерживающий нужный Вам язык.
        * [Инструкция по установке шрифта.](../settingDescription/RU.md#font-)

        * ### ___Где я могу найти шрифты?___

            * По запросу "шрифты скачать" в любом поисковике.
        * Поддерживаются шрифты TrueType/OpenType.


1. ### ___Игра \<вставить имя игры\> не переводится/не запускается/работает некорректно.___

    * Как сделана та или иная игра зависит от разработчика. В зависимости от реализации, могут быть конфликты в отдельных играх. Смиритесь. Здесь я ничего не могу поделать. Совместимость со всеми играми во вселенной реализовать, к сожалению, не получится.


1. ### ___Как вызвать графический интерфейс переводчика?___

    * Комбинация (одновременное нажатие) клавиш ***Alt***+***~*** (тильда).

        1. #### Почему такой странный выбор?

            * Из за вопроса совместимости. Я стараюсь делать переводчик наиболее универсальным, а такую комбинацию вряд ли где будут использовать.

            1. #### Можно поменять?

                * Может быть, когда нибудь... На данный момент, насколько я знаю, ни разу не было конфликтов комбинаций с играми, а значит выбор верный.


1. ### Переводчик удаляет теги из оригинальной игры (курсив, жирный текст, цвет и прочее).

    * Есть такое. А ещё удаляет текстовые теги вида ***{w}***/***{nw}*** и подобные.
    * Сделано это потому что теги нельзя экранировать при обращении к сервису перевода.
        * На ***"{color=...}"*** сервис вполне может вернуть ***"{цвет=...}"***, что, разумеется, приведёт к ошибке.
        * Можно, конечно, переводить частями (отрывок до тега, отрывок после него и т.д.), но в этом случае сильно пострадает качество самого перевода, т.к. слова переведутся без учёта всего контекста и будут не связаны между собой.
        * Я не вижу способа "безболезненно" сохранить теги, поэтому принял решение убрать их вообще.


1. ### А как запустить переводчик на ОС Android?

    * Без понятия. Переводчик я пишу под ПК версию. Под телефоны никогда не прогал и не умею этого делать.
    * Насколько я слышал, вроде бы существуют какие-то порты от сторонних разработчиков, но они не имеют никакого отношения к проекту. Пользуйтесь ими только на свой страх и риск.


1. ### ___Я не нашёл ответа на свой вопрос в этой документации.___

    * Посмотрите канал вопросов в [Discord сообществе](https://discord.gg/FqsQXNH6Fg) переводчика. Скорее всего, там уже отвечали на подобный вопрос.

    * Если ответа нет, то задайте свой вопрос там.
        * ___Именно на канале вопросов.___
            * ___Не в личных сообщениях автору переводчика.___
            * ___Не в личных сообщениях модератору.___

        * Задавая свой вопрос в личных сообщениях, Вы лишаете других возможности увидеть ответ, в случае возникновения у них подобных проблем и, помимо прочего, вынуждаете администратора/модератора несколько раз повторять одно и то же.
            * Что совершенно не весело.
            * Вот вообще ни разу.
            * Прям вообще.

        * Если Вы сообщаете о ошибке, не забудьте [приложить данные, необходимые для устранения ошибки](./RU.md#подготовить-следующие-данные-необходимые-разработчику-для-отладки).


1. ### ___Я всё ещё что-то не понял в этой документации. Можно, всё таки, написать Вам в личные сообщения/в мессенджер/на почту?___

    * Нет.


1. ### ___Но у меня...___

    * Нет.


1. ### ___Но...___

    * Нет.
